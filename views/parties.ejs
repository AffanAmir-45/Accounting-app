<!DOCTYPE html>
<html>
<head>
  <title>Add Party Opening Balances</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-4 bg-light">
  <div class="container" style="max-width: 900px;">
    <h2 class="mb-4">📋 Add Debtor / Creditor Party</h2>

    <form method="POST" class="row g-3 mb-5">
      <div class="col-md-4">
        <input type="text" name="name" class="form-control" placeholder="Party Name" required>
      </div>
      <div class="col-md-3">
        <select name="type" class="form-control" required>
          <option value="">Select Type</option>
          <option value="debtor">Debtor</option>
          <option value="creditor">Creditor</option>
        </select>
      </div>
      <div class="col-md-3">
        <input type="number" name="balance" class="form-control" placeholder="Opening Balance" required>
      </div>
      <div class="col-md-2">
        <button type="submit" class="btn btn-primary w-100">➕ Add</button>
      </div>
    </form>

    <div class="row mb-5">
      <div class="col-md-6">
        <h4 class="mb-3">📒 Creditor T-Account</h4>
        <table class="table table-bordered bg-white">
          <thead class="table-secondary">
            <tr>
              <th>Debit (Make Payment)</th>
              <th>Credit (Credit Purchase)</th>
            </tr>
          </thead>
          <tbody>
            <% creditorTransactions.forEach(tx => { %>
              <tr>
                <td><%= tx.type === 'make_payment' ? tx.amount : '' %></td>
                <td><%= tx.type === 'credit_purchase' ? tx.amount : '' %></td>
              </tr>
            <% }) %>
          </tbody>
        </table>
      </div>

      <div class="col-md-6">
        <h4 class="mb-3">📗 Debtor T-Account</h4>
        <table class="table table-bordered bg-white">
          <thead class="table-secondary">
            <tr>
              <th>Debit (Credit Sale)</th>
              <th>Credit (Receive Payment)</th>
            </tr>
          </thead>
          <tbody>
            <% debtorTransactions.forEach(tx => { %>
              <tr>
                <td><%= tx.type === 'credit_sale' ? tx.amount : '' %></td>
                <td><%= tx.type === 'receive_payment' ? tx.amount : '' %></td>
              </tr>
            <% }) %>
          </tbody>
        </table>
      </div>
    </div>

    <h4 class="mb-3">📌 Current Parties</h4>
    <table class="table table-bordered bg-white">
      <thead class="table-secondary">
        <tr>
          <th>Party Name</th>
          <th>Type</th>
          <th>Opening Balance</th>
        </tr>
      </thead>
      <tbody>
        <% parties.forEach(p => { %>
          <tr>
            <td><%= p.name %></td>
            <td><%= p.type %></td>
            <td><%= p.amount %></td>
          </tr>
        <% }) %>
      </tbody>
    </table>

    <a href="/" class="btn btn-secondary mt-4">← Back to Dashboard</a>
  </div>
</body>
</html>
